<!DOCTYPE html>
<html lang="zxx">
<head>
    <title>MM | Portfolio - LobianToolkit</title>
    <meta charset="UTF-8">
    <meta name="description" content="Milos Milosavljevic Portfolio - LobianToolkit Demo">
    <meta name="keywords" content="photo, html, unity, webgl, ai, portfolio">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/font-awesome.min.css" />
    <link rel="stylesheet" href="css/slicknav.min.css" />

    <link rel="stylesheet" href="css/style.css" />

    <style>

        .main-content-section {
            padding-top: 60px;
            padding-bottom: 60px;
        }

        .project-description-area {
            text-align: center;
            margin-bottom: 40px;
        }

        .project-description-area h2 {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .project-description-area p {
            font-size: 1.1rem;
            color: #888;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Added for spacing the second project */
        .second-project-row {
            margin-top: 80px;
            border-top: 1px solid #eee;
            padding-top: 80px;
        }

        /* --- Unity Container Styles --- */
        #unity-container-build,
        #unity-container-showcase {
            width: 100%;
            aspect-ratio: 16 / 9;
            margin: 0 auto;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: relative; /* Needed for play overlay */
            background: #231F20; /* Background shown before load */
        }

        #unity-canvas-build,
        #unity-canvas-showcase {
            width: 100%;
            height: 100%;
            background: #231F20;
        }
        
        /* --- Play Button Overlay --- */
        .play-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 20;
            transition: opacity 0.3s ease;
        }
        .play-overlay:hover {
            background: rgba(0, 0, 0, 0.7);
        }
        .play-overlay i {
            font-size: 80px;
            color: white;
            text-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        /* --- Loader Styles --- */
        #loader-container-build,
        #loader-container-showcase {
            width: 100%;
            max-width: 600px;
            margin: 20px auto 0;
            text-align: center;
            transition: opacity 0.5s ease-out;
            /* Hide by default */
            display: none; 
        }

        .progress-bar-container {
            width: 100%;
            height: 12px;
            background-color: #333;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }

        .progress-bar {
            width: 0%;
            height: 100%;
            border-radius: 6px;
            background: linear-gradient(90deg, #f51167, #00ffff);
            background-size: 200% 200%;
            transition: width 0.4s ease;
            animation: gradient-animation 3s ease infinite;
        }

        #loading-percentage-build,
        #loading-percentage-showcase {
            margin-top: 10px;
            color: #ccc;
            font-weight: bold;
        }

        @keyframes gradient-animation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #unity-wrapper-build,
        #unity-wrapper-showcase {
            position: relative;
            display: block;
        }
        
        /* --- Fullscreen Button Styles --- */
        #fullscreen-btn-build,
        #fullscreen-btn-showcase {
            position: absolute;
            bottom: -36px; /* 12px below the container */
            right: 0; /* aligned to right edge of container */
            z-index: 10;
            background: rgba(0, 0, 0, 0.6);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 6px 10px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        #fullscreen-btn-build:hover,
        #fullscreen-btn-showcase:hover {
            background: rgba(0, 0, 0, 0.9);
        }

        #fullscreen-btn-build:active,
        #fullscreen-btn-showcase:active {
            transform: scale(0.95);
        }
    </style>


</head>
<body>
<div id="preloder">
    <div class="loader"></div>
</div>

<header class="header">
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-4 col-md-3 order-2 order-sm-1">
                <div class="header__social">
                    <a href="https://www.linkedin.com/in/milos-milosavljevic-074a41173/"><i class="fa fa-linkedin"></i></a>
                </div>
            </div>
            <div class="col-sm-4 col-md-6 order-1  order-md-2 text-center">
                <a href="./index.html" class="site-logo">
                    <img src="img/logo.png" alt="">
                </a>
            </div>
            <div class="col-sm-4 col-md-3 order-3 order-sm-3">
            </div>
        </div>
        <nav class="main__menu">
            <ul class="nav__menu">
                <li><a href="./index.html">Home</a></li>
                <li><a href="./about.html">About</a></li>
                <li><a href="./contact.html">Contact</a></li>
                <li><a href="./lobianToolkit.html" class="menu--active">LobianToolkit</a></li>
            </ul>
        </nav>
    </div>
</header>
<section class="main-content-section">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="project-description-area">
                    <h2 class="section-title">LobianToolkit Demo</h2>
                    <p>
                        This demonstration showcases an apartment furnishing simulator built with the LobianToolkit, a set of tools designed to simplify creating applications with AI integration.
                        It is still in development and this page is primarily for testing and showcasing of experimental features, any feedback is appreciated.
                    </p>
                </div>
            </div>
        </div>

        <div class="row justify-content-center">
            <div class="col-lg-10 col-md-12">
                <div id="unity-wrapper-build" style="position: relative; display: block;">
                    <div id="play-btn-build" class="play-overlay">
                        <i class="fa fa-play-circle"></i>
                    </div>
                    <div id="unity-container-build" class="unity-desktop">
                        <canvas id="unity-canvas-build"></canvas>
                    </div>
                    <button id="fullscreen-btn-build" title="Toggle Fullscreen">
                        <i class="fa fa-expand"></i>
                    </button>
                </div>
                <div id="loader-container-build">
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="unity-progress-bar-build"></div>
                    </div>
                    <div id="loading-percentage-build">0%</div>
                </div>
            </div>
        </div>
        
        <div class="row second-project-row">
            <div class="col-12">
                <div class="project-description-area">
                    <h2 class="section-title">LobianToolkit Showcase</h2>
                    <p>
                        This demo showcases a pre-furnished apartment, highlighting the rendering capabilities and prop library of the LobianToolkit. 
                        Feel free to explore the environment.
                    </p>
                </div>
            </div>
        </div>

        <div class="row justify-content-center">
            <div class="col-lg-10 col-md-12">
                <div id="unity-wrapper-showcase" style="position: relative; display: block;">
                    <div id="play-btn-showcase" class="play-overlay">
                        <i class="fa fa-play-circle"></i>
                    </div>
                    <div id="unity-container-showcase" class="unity-desktop">
                        <canvas id="unity-canvas-showcase"></canvas>
                    </div>
                    <button id="fullscreen-btn-showcase" title="Toggle Fullscreen">
                        <i class="fa fa-expand"></i>
                    </button>
                </div>
                <div id="loader-container-showcase">
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="unity-progress-bar-showcase"></div>
                    </div>
                    <div id="loading-percentage-showcase">0%</div>
                </div>
            </div>
        </div>
    </div>
</section>
<script>
    
    // --- LOADER FOR BUILDER DEMO ---
    function loadUnityBuild() {
        const buildUrl = "https://YOUR_ACCOUNT_NAME.blob.core.windows.net/webgl-builds/BuilderDemo/Build";
        const loaderUrl = buildUrl + "/Build.loader.js";
        const config = {
            dataUrl: buildUrl + "/Build.data.unityweb",
            frameworkUrl: buildUrl + "/Build.framework.js.unityweb",
            codeUrl: buildUrl + "/Build.wasm.unityweb",
            streamingAssetsUrl: "StreamingAssets",
            companyName: "Milos Milosavljevic",
            productName: "LobianToolkit Demo",
            productVersion: "1.0",
        };

        const canvas = document.querySelector("#unity-canvas-build");
        const loaderContainer = document.querySelector("#loader-container-build");
        const progressBar = document.querySelector("#unity-progress-bar-build");
        const loadingPercentage = document.querySelector("#loading-percentage-build");
        const playButton = document.querySelector("#play-btn-build");

        // Hide play button, show loader
        playButton.style.display = 'none';
        loaderContainer.style.display = 'block';

        const script = document.createElement("script");
        script.src = loaderUrl;
        script.onload = () => {
            createUnityInstance(canvas, config, (progress) => {
                const percentage = Math.round(progress * 100);
                progressBar.style.width = percentage + "%";
                loadingPercentage.textContent = percentage + "%";
            }).then((unityInstance) => {
                loaderContainer.style.opacity = '0';
                setTimeout(() => {
                    loaderContainer.style.display = 'none';
                }, 500);
            }).catch((message) => {
                alert(message);
                // Show play button again on error?
                playButton.style.display = 'flex';
                loaderContainer.style.display = 'none';
            });
        };
        document.body.appendChild(script);
    }
    
    // --- LOADER FOR SHOWCASE DEMO ---
    function loadUnityShowcase() {
        const buildUrl = "https://YOUR_ACCOUNT_NAME.blob.core.windows.net/webgl-builds/ShowcaseDemo/Showcase"; // New path
        const loaderUrl = buildUrl + "/Showcase.loader.js"; // New file
        const config = {
            dataUrl: buildUrl + "/Showcase.data.unityweb", // New file
            frameworkUrl: buildUrl + "/Showcase.framework.js.unityweb", // New file
            codeUrl: buildUrl + "/Showcase.wasm.unityweb", // New file
            streamingAssetsUrl: "StreamingAssets",
            companyName: "Milos Milosavljevic",
            productName: "LobianToolkit Showcase", // New product name
            productVersion: "1.0",
        };

        const canvas = document.querySelector("#unity-canvas-showcase");
        const loaderContainer = document.querySelector("#loader-container-showcase");
        const progressBar = document.querySelector("#unity-progress-bar-showcase");
        const loadingPercentage = document.querySelector("#loading-percentage-showcase");
        const playButton = document.querySelector("#play-btn-showcase");

        // Hide play button, show loader
        playButton.style.display = 'none';
        loaderContainer.style.display = 'block';

        const script = document.createElement("script");
        script.src = loaderUrl;
        script.onload = () => {
            createUnityInstance(canvas, config, (progress) => {
                const percentage = Math.round(progress * 100);
                progressBar.style.width = percentage + "%";
                loadingPercentage.textContent = percentage + "%";
            }).then((unityInstance) => {
                loaderContainer.style.opacity = '0';
                setTimeout(() => {
                    loaderContainer.style.display = 'none';
                }, 500);
            }).catch((message) => {
                alert(message);
                playButton.style.display = 'flex';
                loaderContainer.style.display = 'none';
            });
        };
        document.body.appendChild(script);
    }


    // --- GENERIC FULLSCREEN FUNCTION ---
    function toggleFullscreen(containerId) {
        const container = document.getElementById(containerId);
        if (!document.fullscreenElement && !document.webkitFullscreenElement) {
            // Enter fullscreen
            if (container.requestFullscreen) {
                container.requestFullscreen();
            } else if (container.webkitRequestFullscreen) { /* Safari */
                container.webkitRequestFullscreen();
            } else if (container.msRequestFullscreen) { /* IE11 */
                container.msRequestFullscreen();
            }
        } else {
            // Exit fullscreen
            if (document.exitFullscreen) {
                document.exitFullscreen();
            } else if (document.webkitExitFullscreen) { /* Safari */
                document.webkitExitFullscreen();
            } else if (document.msExitFullscreen) { /* IE11 */
                document.msExitFullscreen();
            }
        }
    }

    // --- NEW WRAPPER ---
    // Wait for the DOM to be fully loaded before attaching event listeners
    document.addEventListener("DOMContentLoaded", function() {
        
        // --- ATTACH EVENT LISTENERS ---
        
        // Play Buttons
        document.getElementById("play-btn-build").addEventListener("click", loadUnityBuild);
        document.getElementById("play-btn-showcase").addEventListener("click", loadUnityShowcase);
        
        // Fullscreen Buttons
        document.getElementById("fullscreen-btn-build").addEventListener("click", () => toggleFullscreen("unity-container-build"));
        document.getElementById("fullscreen-btn-showcase").addEventListener("click", () => toggleFullscreen("unity-container-showcase"));

        // Optional: Add ESC key listener to exit fullscreen gracefully
        document.addEventListener("keydown", (e) => {
            if (e.key === "Escape" && (document.fullscreenElement || document.webkitFullscreenElement)) {
                // ...
            }
        });

    }); // --- END OF NEW WRAPPER ---

</script>
<footer class="footer__section">
    <div class="container">
        <div class="footer__copyright__text">
            <p>
                Copyright &copy;
                <script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
            </p>
        </div>
    </div>
</footer>
<div class="search-model">
    <div class="h-100 d-flex align-items-center justify-content-center">
        <div class="search-close-switch">+</div>
        <form class="search-model-form">
            <input type="text" id="search-input" placeholder="Search here.....">
        </form>
    </div>
</div>
<script src="js/vendor/jquery-3.2.1.min.js"></script>
<script src="js/jquery.slicknav.min.js"></script>
<script src="js/slick.min.js"></script>
<script src="js/main.js"></script>

</body>
</html>